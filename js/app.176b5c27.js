(function(){"use strict";var e={421:function(e,t,i){var s=i(2381),r=i(5382);const l={class:"app-container"};function n(e,t,i,s,n,a){const o=(0,r.g2)("SlidingPuzzle");return(0,r.uX)(),(0,r.CE)("div",l,[t[0]||(t[0]=(0,r.Lk)("h1",null,"华容道滑块拼图",-1)),(0,r.bF)(o)])}var a=i(3227);const o={class:"sliding-puzzle"},u={class:"controls"},c={class:"info"},d={class:"moves"},h={class:"timer"},m={class:"buttons"},v={key:0,class:"overlay"},p={key:1,class:"overlay"},f={class:"message"},g=["onClick"],k={key:0};function C(e,t,i,l,n,C){return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",u,[(0,r.Lk)("div",c,[(0,r.Lk)("div",d,[t[5]||(t[5]=(0,r.Lk)("span",{class:"icon-move"},"⬆️",-1)),(0,r.eW)(" 步数: "+(0,a.v_)(n.moves),1)]),(0,r.Lk)("div",h,[t[6]||(t[6]=(0,r.Lk)("span",{class:"icon-timer"},"⏰",-1)),(0,r.eW)(" 时间: "+(0,a.v_)(C.formatTime(n.timer)),1)])]),(0,r.Lk)("div",m,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>C.startNewGame&&C.startNewGame(...e)),class:"btn"},"新游戏"),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>C.togglePause&&C.togglePause(...e)),class:"btn"},(0,a.v_)(n.isPaused?"继续":"暂停"),1),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.gridSize=e),onChange:t[3]||(t[3]=(...e)=>C.startNewGame&&C.startNewGame(...e)),class:"select"},t[7]||(t[7]=[(0,r.Lk)("option",{value:"3"},"3 x 3",-1),(0,r.Lk)("option",{value:"4"},"4 x 4",-1),(0,r.Lk)("option",{value:"5"},"5 x 5",-1)]),544),[[s.u1,n.gridSize]])])]),(0,r.Lk)("div",{class:(0,a.C4)(["game-container",{paused:n.isPaused,completed:n.isCompleted}])},[n.isPaused?((0,r.uX)(),(0,r.CE)("div",v,t[8]||(t[8]=[(0,r.Lk)("div",{class:"message"},"已暂停",-1)]))):(0,r.Q3)("",!0),n.isCompleted?((0,r.uX)(),(0,r.CE)("div",p,[(0,r.Lk)("div",f,[t[9]||(t[9]=(0,r.Lk)("h2",null,"恭喜!",-1)),t[10]||(t[10]=(0,r.Lk)("p",null,"你完成了拼图!",-1)),(0,r.Lk)("p",null,"步数: "+(0,a.v_)(n.moves),1),(0,r.Lk)("p",null,"时间: "+(0,a.v_)(C.formatTime(n.timer)),1),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>C.startNewGame&&C.startNewGame(...e)),class:"btn"},"再来一次")])])):(0,r.Q3)("",!0),(0,r.Lk)("div",{class:"puzzle-grid",style:(0,a.Tr)(C.gridStyle)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.tiles,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,a.C4)(["tile",{empty:0===e.value,correct:e.isCorrect}]),style:(0,a.Tr)(C.getTileStyle(e)),onClick:t=>C.moveTile(e)},[0!==e.value?((0,r.uX)(),(0,r.CE)("span",k,(0,a.v_)(e.value),1)):(0,r.Q3)("",!0)],14,g))),128))],4)],2)])}i(1201),i(6040),i(3047),i(2144),i(5129),i(8773),i(9062);var T={name:"SlidingPuzzle",data(){return{gridSize:4,tiles:[],emptyTileIndex:0,moves:0,timer:0,timerInterval:null,isPaused:!1,isCompleted:!1,gameStarted:!1}},computed:{gridStyle(){return{gridTemplateColumns:`repeat(${this.gridSize}, 1fr)`,gridTemplateRows:`repeat(${this.gridSize}, 1fr)`}}},mounted(){this.startNewGame()},beforeUnmount(){this.clearTimer()},methods:{startNewGame(){this.clearTimer(),this.moves=0,this.timer=0,this.isPaused=!1,this.isCompleted=!1,this.gameStarted=!1,this.initializeTiles(),this.shuffleTiles()},initializeTiles(){this.tiles=[];const e=this.gridSize*this.gridSize;for(let t=0;t<e;t++)this.tiles.push({id:t,value:t===e-1?0:t+1,row:Math.floor(t/this.gridSize),col:t%this.gridSize,isCorrect:!1});this.emptyTileIndex=e-1,this.updateCorrectPositions()},shuffleTiles(){const e=this.gridSize*this.gridSize*20;for(let t=0;t<e;t++){const e=this.tiles[this.emptyTileIndex],t=this.getAdjacentTiles(e);if(t.length>0){const i=Math.floor(Math.random()*t.length),s=t[i];this.swapTiles(s,e,!1)}}if(!this.isSolvable()){const e=this.tiles.find(e=>0!==e.value),t=this.tiles.find(t=>0!==t.value&&t.id!==e.id),i=e.value;e.value=t.value,t.value=i}this.updateCorrectPositions()},isSolvable(){const e=this.tiles.map(e=>e.value).filter(e=>0!==e);let t=0;for(let i=0;i<e.length;i++)for(let s=i+1;s<e.length;s++)e[i]>e[s]&&t++;if(this.gridSize%2===1)return t%2===0;{const e=this.tiles[this.emptyTileIndex],i=this.gridSize-e.row;return(t+i)%2===1}},getAdjacentTiles(e){return this.tiles.filter(t=>1===Math.abs(t.row-e.row)&&t.col===e.col||1===Math.abs(t.col-e.col)&&t.row===e.row)},moveTile(e){if(this.isPaused||this.isCompleted)return;const t=this.tiles[this.emptyTileIndex],i=this.getAdjacentTiles(t).includes(e);i&&(this.gameStarted||(this.startTimer(),this.gameStarted=!0),this.swapTiles(e,t,!0),this.checkCompletion())},swapTiles(e,t,i=!0){const s=e.value;e.value=t.value,t.value=s,0===e.value?this.emptyTileIndex=this.tiles.findIndex(t=>t.id===e.id):0===t.value&&(this.emptyTileIndex=this.tiles.findIndex(e=>e.id===t.id)),i&&this.moves++,this.updateCorrectPositions()},updateCorrectPositions(){const e=this.gridSize*this.gridSize;this.tiles.forEach(t=>{0===t.value?t.isCorrect=t.id===e-1:t.isCorrect=t.value===t.id+1})},checkCompletion(){const e=this.tiles.every(e=>e.isCorrect);e&&(this.isCompleted=!0,this.clearTimer())},startTimer(){this.clearTimer(),this.timerInterval=setInterval(()=>{this.isPaused||this.isCompleted||this.timer++},1e3)},clearTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)},togglePause(){!this.isCompleted&&this.gameStarted&&(this.isPaused=!this.isPaused)},formatTime(e){const t=Math.floor(e/60),i=e%60;return`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},getTileStyle(e){return{backgroundColor:e.isCorrect?"#4caf50":"#3498db",opacity:0===e.value?0:1}}}},S=i(2114);const z=(0,S.A)(T,[["render",C],["__scopeId","data-v-4af4af42"]]);var y=z,b={name:"App",components:{SlidingPuzzle:y}};const w=(0,S.A)(b,[["render",n]]);var L=w;(0,s.Ef)(L).mount("#app")}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,i),l.exports}i.m=e,function(){var e=[];i.O=function(t,s,r,l){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],l=e[c][2];for(var a=!0,o=0;o<s.length;o++)(!1&l||n>=l)&&Object.keys(i.O).every(function(e){return i.O[e](s[o])})?s.splice(o--,1):(a=!1,l<n&&(n=l));if(a){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[s,r,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,l,n=s[0],a=s[1],o=s[2],u=0;if(n.some(function(t){return 0!==e[t]})){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(o)var c=o(i)}for(t&&t(s);u<n.length;u++)l=n[u],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(c)},s=self["webpackChunksliding_puzzle_game"]=self["webpackChunksliding_puzzle_game"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],function(){return i(421)});s=i.O(s)})();
//# sourceMappingURL=app.176b5c27.js.map